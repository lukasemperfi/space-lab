{"version":3,"file":"Accordion.min.js","sources":["components/shared/Accordion.js"],"sourcesContent":["class Accordion extends HTMLElement {\n  constructor() {\n    super();\n    this._questions = [];\n    this.render();\n    this.attachEventListeners();\n    this.initializeActiveItem();\n    this.attachResizeListener();\n  }\n\n  // Метод для установки вопросов\n  setQuestions(questions) {\n    this._questions = questions || [];\n    this.render();\n    this.attachEventListeners();\n    this.initializeActiveItem();\n  }\n\n  render() {\n    if (!this._questions || this._questions.length === 0) {\n      this.innerHTML =\n        '<div class=\"accordion\"><p>Нет вопросов для отображения</p></div>';\n      return;\n    }\n\n    const questionsHTML = this._questions\n      .map(\n        (question, index) => `\n      <div class=\"accordion__item ${question.active ? 'active' : ''}\">\n        <button class=\"accordion__header\">${question.title} <svg width=\"21\" height=\"21\" viewBox=\"0 0 21 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M10.5 0V21M0 10H21\" stroke=\"url(#paint0_linear_2_549)\" stroke-width=\"3\" />\n  <defs>\n    <linearGradient id=\"paint0_linear_2_549\" x1=\"3.45\" y1=\"8.51378e-06\" x2=\"22.843\" y2=\"4.68775\" gradientUnits=\"userSpaceOnUse\">\n      <stop stop-color=\"#FC84FF\" />\n      <stop offset=\"1\" stop-color=\"#54D1FA\" />\n    </linearGradient>\n  </defs>\n</svg></button>\n        <div class=\"accordion__content\">\n          ${question.content}\n        </div>\n      </div>\n    `\n      )\n      .join('');\n\n    this.innerHTML = `\n      <div class=\"accordion\">\n        ${questionsHTML}\n      </div>\n    `;\n  }\n\n  initializeActiveItem() {\n    // Find the item with 'active' class and set its content height\n    const activeItem = this.querySelector('.accordion__item.active');\n    if (activeItem) {\n      const content = activeItem.querySelector('.accordion__content');\n      content.style.maxHeight = content.scrollHeight + 'px';\n    }\n  }\n\n  attachResizeListener() {\n    let resizeTimeout;\n\n    // Debounced resize handler to avoid excessive recalculations\n    const handleResize = () => {\n      clearTimeout(resizeTimeout);\n      resizeTimeout = setTimeout(() => {\n        this.updateActiveItemHeight();\n      }, 100);\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    // Store the listener for cleanup\n    this._resizeListener = handleResize;\n  }\n\n  updateActiveItemHeight() {\n    // Update height for all active items when window resizes\n    const activeItems = this.querySelectorAll('.accordion__item.active');\n    activeItems.forEach(item => {\n      const content = item.querySelector('.accordion__content');\n      if (content.style.maxHeight !== '0px') {\n        content.style.maxHeight = content.scrollHeight + 'px';\n      }\n    });\n  }\n\n  attachEventListeners() {\n    const headers = this.querySelectorAll('.accordion__header');\n\n    headers.forEach(header => {\n      header.addEventListener('click', () => {\n        const item = header.parentElement;\n        const content = item.querySelector('.accordion__content');\n\n        // Закрыть все остальные элементы\n        this.querySelectorAll('.accordion__item').forEach(i => {\n          if (i !== item) {\n            i.classList.remove('active');\n            i.querySelector('.accordion__content').style.maxHeight = 0;\n          }\n        });\n\n        // Переключить текущий элемент\n        if (item.classList.contains('active')) {\n          item.classList.remove('active');\n          content.style.maxHeight = 0;\n        } else {\n          item.classList.add('active');\n          content.style.maxHeight = content.scrollHeight + 'px';\n        }\n      });\n    });\n  }\n}\n\ncustomElements.define('faq-accordion', Accordion);\n\n// // Check for default-active attribute first, then fall back to active class\n// const defaultActiveIndex = this.getAttribute('default-active');\n// let activeItem;\n\n// if (defaultActiveIndex !== null) {\n//   // Use the index from the attribute\n//   const items = this.querySelectorAll('.accordion__item');\n//   const index = parseInt(defaultActiveIndex);\n//   if (index >= 0 && index < items.length) {\n//     activeItem = items[index];\n//     activeItem.classList.add('active');\n//   }\n// } else {\n//   // Fall back to existing active class\n//   activeItem = this.querySelector('.accordion__item.active');\n// }\n"],"names":["Accordion","HTMLElement","constructor","super","this","_questions","render","attachEventListeners","initializeActiveItem","attachResizeListener","setQuestions","questions","questionsHTML","length","map","question","index","active","title","content","join","innerHTML","activeItem","querySelector","style","maxHeight","scrollHeight","let","resizeTimeout","handleResize","clearTimeout","setTimeout","updateActiveItemHeight","window","addEventListener","_resizeListener","querySelectorAll","forEach","item","header","parentElement","i","classList","remove","contains","add","customElements","define"],"mappings":"MAAMA,kBAAkBC,YACtBC,cACEC,MAAM,EACNC,KAAKC,WAAa,GAClBD,KAAKE,OAAO,EACZF,KAAKG,qBAAqB,EAC1BH,KAAKI,qBAAqB,EAC1BJ,KAAKK,qBAAqB,CAC5B,CAGAC,aAAaC,GACXP,KAAKC,WAAaM,GAAa,GAC/BP,KAAKE,OAAO,EACZF,KAAKG,qBAAqB,EAC1BH,KAAKI,qBAAqB,CAC5B,CAEAF,SACE,IAMMM,EANDR,KAAKC,YAAyC,IAA3BD,KAAKC,WAAWQ,QAMlCD,EAAgBR,KAAKC,WACxBS,IACC,CAACC,EAAUC;oCACiBD,EAASE,OAAS,SAAW;4CACrBF,EAASG;;;;;;;;;;YAUzCH,EAASI;;;KAIf,EACCC,KAAK,EAAE,EAEVhB,KAAKiB;;UAECT;;OA5BJR,KAAKiB,UACH,kEA8BN,CAEAb,uBAEE,IAAMc,EAAalB,KAAKmB,cAAc,yBAAyB,EAC3DD,KACIH,EAAUG,EAAWC,cAAc,qBAAqB,GACtDC,MAAMC,UAAYN,EAAQO,aAAe,KAErD,CAEAjB,uBACEkB,IAAIC,EAGJ,IAAMC,EAAe,KACnBC,aAAaF,CAAa,EAC1BA,EAAgBG,WAAW,KACzB3B,KAAK4B,uBAAuB,CAC9B,EAAG,GAAG,CACR,EAEAC,OAAOC,iBAAiB,SAAUL,CAAY,EAG9CzB,KAAK+B,gBAAkBN,CACzB,CAEAG,yBAEsB5B,KAAKgC,iBAAiB,yBAAyB,EACvDC,QAAQC,IACZnB,EAAUmB,EAAKf,cAAc,qBAAqB,EACxB,QAA5BJ,EAAQK,MAAMC,YAChBN,EAAQK,MAAMC,UAAYN,EAAQO,aAAe,KAErD,CAAC,CACH,CAEAnB,uBACkBH,KAAKgC,iBAAiB,oBAAoB,EAElDC,QAAQE,IACdA,EAAOL,iBAAiB,QAAS,KAC/B,IAAMI,EAAOC,EAAOC,cACpB,IAAMrB,EAAUmB,EAAKf,cAAc,qBAAqB,EAGxDnB,KAAKgC,iBAAiB,kBAAkB,EAAEC,QAAQI,IAC5CA,IAAMH,IACRG,EAAEC,UAAUC,OAAO,QAAQ,EAC3BF,EAAElB,cAAc,qBAAqB,EAAEC,MAAMC,UAAY,EAE7D,CAAC,EAGGa,EAAKI,UAAUE,SAAS,QAAQ,GAClCN,EAAKI,UAAUC,OAAO,QAAQ,EAC9BxB,EAAQK,MAAMC,UAAY,IAE1Ba,EAAKI,UAAUG,IAAI,QAAQ,EAC3B1B,EAAQK,MAAMC,UAAYN,EAAQO,aAAe,KAErD,CAAC,CACH,CAAC,CACH,CACF,CAEAoB,eAAeC,OAAO,gBAAiB/C,SAAS"}